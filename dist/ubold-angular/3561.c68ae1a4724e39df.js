"use strict";(self.webpackChunkubold_angular=self.webpackChunkubold_angular||[]).push([[3561],{3561:(z,d,r)=>{r.r(d),r.d(d,{CustomerModule:()=>F});var u=r(9808),p=r(3075),h=r(1413),b=r(9095),v=r(1819),c=r(4202),l=r(9591),e=r(5e3),f=r(2313),C=r(9475),g=r(3878),y=r(9699);const S=["advancedTable"],T=[{path:"",component:(()=>{class s{constructor(t){this.sanitizer=t,this.pageTitle=[],this.customerList=[],this.loading=!1,this.selectAll=!1,this.pageSizeOptions=[5,10,20],this.columns=[]}ngOnInit(){this.pageTitle=[{label:"Ecommerce",path:"/"},{label:"Customers",path:"/",active:!0}],this._fetchData(),this.initAdvancedTableData()}_fetchData(){this.customerList=l.F1}initAdvancedTableData(){this.columns=[{name:"name",label:"Customers",formatter:this.customerNameFormatter.bind(this)},{name:"phone",label:"Phone",formatter:t=>t.phone},{name:"balance",label:"Balance",formatter:t=>t.balance},{name:"orders",label:"Orders",formatter:t=>t.orders},{name:"last_order",label:"Last Order",formatter:this.customerLastOrderFormatter.bind(this)},{name:"status",label:"Status",formatter:this.customerStatusFormatter.bind(this)},{name:"Action",label:"Action",width:75,formatter:this.customerActionFormatter.bind(this),sort:!1}]}customerNameFormatter(t){return this.sanitizer.bypassSecurityTrustHtml(`\n      <div class="table-user">\n      <img src="${t.avatar}" alt="table-user" class="me-2 rounded-circle">\n       <a href="javascript:void(0);" class="text-body fw-semibold">${t.name}</a>\n       </div>\n      `)}customerLastOrderFormatter(t){return this.sanitizer.bypassSecurityTrustHtml(`  ${t.last_order.date} <small class="text-muted">${t.last_order.time}</small>`)}customerStatusFormatter(t){return this.sanitizer.bypassSecurityTrustHtml("Active"==t.status?'<span class="badge badge-soft-success">Active</span>':'<span class="badge badge-soft-danger">Blocked</span>')}customerActionFormatter(){return this.sanitizer.bypassSecurityTrustHtml('  <a href="javascript:void(0);" class="action-icon"> <i class="mdi mdi-square-edit-outline"></i></a>\n           <a href="javascript:void(0);" class="action-icon"> <i class="mdi mdi-delete"></i></a>')}compare(t,a){return t<a?-1:t>a?1:0}sort(t){this.customerList=""===t.direction?l.F1:[...this.customerList].sort((a,o)=>{let n;return n="last_order"===t.column?this.compare(a.last_order.date,o.last_order.date):this.compare(a[t.column],o[t.column]),"asc"===t.direction?n:-n})}matches(t,a){var o,n,m;return(null===(o=t.name)||void 0===o?void 0:o.toLowerCase().includes(a))||(null===(n=t.phone)||void 0===n?void 0:n.toLowerCase().includes(a))||String(t.orders).toLowerCase().includes(a)||String(t.balance).toLowerCase().includes(a)||(null===(m=t.status)||void 0===m?void 0:m.toLocaleLowerCase().includes(a))}searchData(t){if(""===t)this._fetchData();else{let a=l.F1;a=a.filter(o=>this.matches(o,t)),this.customerList=a}}}return s.\u0275fac=function(t){return new(t||s)(e.\u0275\u0275directiveInject(f.DomSanitizer))},s.\u0275cmp=e.\u0275\u0275defineComponent({type:s,selectors:[["app-ecommerce-customer"]],viewQuery:function(t,a){if(1&t&&e.\u0275\u0275viewQuery(S,5),2&t){let o;e.\u0275\u0275queryRefresh(o=e.\u0275\u0275loadQuery())&&(a.advancedTable=o.first)}},decls:21,vars:9,consts:[["title","Customers",3,"breadcrumbItems"],[1,"row"],[1,"col-12"],[1,"card"],[1,"card-body"],[1,"row","mb-2"],[1,"col-sm-4"],["href","javascript:void(0);",1,"btn","btn-danger","mb-2"],[1,"mdi","mdi-plus-circle","me-2"],[1,"col-sm-8"],[1,"text-sm-end"],["type","button",1,"btn","btn-success","mb-2","me-1"],[1,"mdi","mdi-cog"],["type","button",1,"btn","btn-light","mb-2","me-1"],["type","button",1,"btn","btn-light","mb-2"],[3,"display"],["tableClasses","table-centered table-striped",3,"tableData","columns","pagination","isSearchable","hasRowSelection","pageSizeOptions","isSortable","search","sort"],["advancedTable",""]],template:function(t,a){1&t&&(e.\u0275\u0275element(0,"app-page-title",0),e.\u0275\u0275elementStart(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"a",7),e.\u0275\u0275element(8,"i",8),e.\u0275\u0275text(9," Add Customers"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(10,"div",9)(11,"div",10)(12,"button",11),e.\u0275\u0275element(13,"i",12),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(14,"button",13),e.\u0275\u0275text(15,"Import"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(16,"button",14),e.\u0275\u0275text(17,"Export"),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275element(18,"app-ui-preloader",15),e.\u0275\u0275elementStart(19,"app-advanced-table",16,17),e.\u0275\u0275listener("search",function(n){return a.searchData(n)})("sort",function(n){return a.sort(n)}),e.\u0275\u0275elementEnd()()()()()),2&t&&(e.\u0275\u0275property("breadcrumbItems",a.pageTitle),e.\u0275\u0275advance(18),e.\u0275\u0275property("display",a.loading),e.\u0275\u0275advance(1),e.\u0275\u0275property("tableData",a.customerList)("columns",a.columns)("pagination",!0)("isSearchable",!0)("hasRowSelection",!0)("pageSizeOptions",a.pageSizeOptions)("isSortable",!0))},directives:[C.T,g.T,y.j],styles:[""]}),s})()}];let L=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.\u0275\u0275defineNgModule({type:s}),s.\u0275inj=e.\u0275\u0275defineInjector({imports:[[c.Bz.forChild(T)],c.Bz]}),s})(),F=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.\u0275\u0275defineNgModule({type:s}),s.\u0275inj=e.\u0275\u0275defineInjector({imports:[[u.CommonModule,p.u5,v.y,h.$,b.p,L]]}),s})()}}]);